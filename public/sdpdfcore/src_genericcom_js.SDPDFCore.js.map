{"version":3,"file":"src_genericcom_js.SDPDFCore.js","mappings":";;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,mCAAmC,EAAE,mBAAO,CAAC,0DAAY;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,KAAK;AACzD;AACA;AACA;AACA;AACA;AACA,yDAAyD,mBAAmB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,mBAAmB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,0CAA0C,IAAI;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;;;;;;ACpFF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,mCAAmC,EAAE,mBAAO,CAAC,0DAAY;AAChE;AACA;AACA,MAAM,2DAA2D;AACjE;AACA,SAAS,QAAQ;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIE;;;;;;;;;;;;;;;AChEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,+CAA+C,EAAE,mBAAO,CAAC,8BAAU;AAC1E,OAAO,iBAAiB,EAAE,mBAAO,CAAC,8CAAkB;AACpD,OAAO,iBAAiB,EAAE,mBAAO,CAAC,wDAAuB;AACzD,OAAO,aAAa,EAAE,mBAAO,CAAC,8CAAkB;AAChD,OAAO,kBAAkB,EAAE,mBAAO,CAAC,0DAAwB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AAGE;;;;;;;;;;;;;;;ACzDF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAO,CAAC,gCAAW;AACnB,OAAO,gCAAgC,EAAE,mBAAO,CAAC,4CAAiB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;ACtDF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gKAAgK,MAAM,eAAe,MAAM;AAC3L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,sCAAsC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,aAAa,EAAE;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,cAAc;AACzC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,aAAa;AAC1B,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;AC5zBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,wBAAwB,EAAE,mBAAO,CAAC,8CAAkB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM;AAC9C,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,yCAAyC,OAAO,UAAU,WAAW,gBAAgB,aAAa;AAClG;AACA,IAAI;AACJ;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,MAAM;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE","sources":["webpack://saltdogreader/./src/download_manager.js","webpack://saltdogreader/./src/generic_scripting.js","webpack://saltdogreader/./src/genericcom.js","webpack://saltdogreader/./src/genericl10n.js","webpack://saltdogreader/./src/l10n.js","webpack://saltdogreader/./src/preferences.js"],"sourcesContent":["/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\nconst {createValidAbsoluteUrl, isPdfFile} = require(\"pdfjs-dist\");\r\n;\r\nfunction download(blobUrl, filename) {\r\n const a = document.createElement(\"a\");\r\n if (!a.click) {\r\n  throw new Error('DownloadManager: \"a.click()\" is not supported.');\r\n }\r\n a.href = blobUrl;\r\n a.target = \"_parent\";\r\n if (\"download\" in a) {\r\n  a.download = filename;\r\n }\r\n (document.body || document.documentElement).appendChild(a);\r\n a.click();\r\n a.remove();\r\n}\r\nclass DownloadManager {\r\n constructor() {\r\n  this._openBlobUrls = new WeakMap();\r\n }\r\n downloadUrl(url, filename) {\r\n  if (!createValidAbsoluteUrl(url, \"http://example.com\")) {\r\n   console.error(`downloadUrl - not a valid URL: ${ url }`);\r\n   return;\r\n  }\r\n  download(url + \"#pdfjs.action=download\", filename);\r\n }\r\n downloadData(data, filename, contentType) {\r\n  const blobUrl = URL.createObjectURL(new Blob([data], { type: contentType }));\r\n  download(blobUrl, filename);\r\n }\r\n openOrDownloadData(element, data, filename) {\r\n  const isPdfData = isPdfFile(filename);\r\n  const contentType = isPdfData ? \"application/pdf\" : \"\";\r\n  if (isPdfData) {\r\n   let blobUrl = this._openBlobUrls.get(element);\r\n   if (!blobUrl) {\r\n    blobUrl = URL.createObjectURL(new Blob([data], { type: contentType }));\r\n    this._openBlobUrls.set(element, blobUrl);\r\n   }\r\n   let viewerUrl;\r\n   viewerUrl = \"?file=\" + encodeURIComponent(blobUrl + \"#\" + filename);\r\n   try {\r\n    window.open(viewerUrl);\r\n    return true;\r\n   } catch (ex) {\r\n    console.error(`openOrDownloadData: ${ ex }`);\r\n    URL.revokeObjectURL(blobUrl);\r\n    this._openBlobUrls.delete(element);\r\n   }\r\n  }\r\n  this.downloadData(data, filename, contentType);\r\n  return false;\r\n }\r\n download(blob, url, filename, sourceEventType = \"download\") {\r\n  const blobUrl = URL.createObjectURL(blob);\r\n  download(blobUrl, filename);\r\n }\r\n}\r\nexport {\r\n DownloadManager\r\n};\r\n","/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\nconst {getPdfFilenameFromUrl, loadScript} = require(\"pdfjs-dist\");\r\nasync function docPropertiesLookup(pdfDocument) {\r\n const url = \"\", baseUrl = url.split(\"#\")[0];\r\n let {info, metadata, contentDispositionFilename, contentLength} = await pdfDocument.getMetadata();\r\n if (!contentLength) {\r\n  const {length} = await pdfDocument.getDownloadInfo();\r\n  contentLength = length;\r\n }\r\n return {\r\n  ...info,\r\n  baseURL: baseUrl,\r\n  filesize: contentLength,\r\n  filename: contentDispositionFilename || getPdfFilenameFromUrl(url),\r\n  metadata: metadata?.getRaw(),\r\n  authors: metadata?.get(\"dc:creator\"),\r\n  numPages: pdfDocument.numPages,\r\n  URL: url\r\n };\r\n}\r\nclass GenericScripting {\r\n constructor(sandboxBundleSrc) {\r\n  this._ready = loadScript(sandboxBundleSrc, true).then(() => {\r\n   return window.pdfjsSandbox.QuickJSSandbox();\r\n  });\r\n }\r\n async createSandbox(data) {\r\n  const sandbox = await this._ready;\r\n  sandbox.create(data);\r\n }\r\n async dispatchEventInSandbox(event) {\r\n  const sandbox = await this._ready;\r\n  setTimeout(() => sandbox.dispatchEvent(event), 0);\r\n }\r\n async destroySandbox() {\r\n  const sandbox = await this._ready;\r\n  sandbox.nukeSandbox();\r\n }\r\n}\r\nexport {\r\n docPropertiesLookup,\r\n GenericScripting\r\n};\r\n","/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\nconst {DefaultExternalServices, PDFViewerApplication} = require(\"./app.js\");\r\nconst {BasePreferences} = require(\"./preferences.js\");\r\nconst {DownloadManager} = require(\"./download_manager.js\");\r\nconst {GenericL10n} = require(\"./genericl10n.js\");\r\nconst {GenericScripting} = require(\"./generic_scripting.js\");\r\n;\r\nconst GenericCom = {};\r\nclass GenericPreferences extends BasePreferences {\r\n async _writeToStorage(prefObj) {\r\n  localStorage.setItem(\"pdfjs.preferences\", JSON.stringify(prefObj));\r\n }\r\n async _readFromStorage(prefObj) {\r\n  return JSON.parse(localStorage.getItem(\"pdfjs.preferences\"));\r\n }\r\n}\r\nclass GenericExternalServices extends DefaultExternalServices {\r\n static createDownloadManager(options) {\r\n  return new DownloadManager();\r\n }\r\n static createPreferences() {\r\n  return new GenericPreferences();\r\n }\r\n static createL10n({\r\n  locale = \"en-US\"\r\n }) {\r\n  return new GenericL10n(locale);\r\n }\r\n static createScripting({sandboxBundleSrc}) {\r\n  return new GenericScripting(sandboxBundleSrc);\r\n }\r\n}\r\nPDFViewerApplication.externalServices = GenericExternalServices;\r\nexport {\r\n GenericCom\r\n};\r\n","/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\nrequire(\"./l10n.js\");\r\nconst {fixupLangCode, getL10nFallback} = require(\"./l10n_utils.js\");\r\nconst webL10n = document.webL10n;\r\nclass GenericL10n {\r\n constructor(lang) {\r\n  this._lang = lang;\r\n  this._ready = new Promise((resolve, reject) => {\r\n   webL10n.setLanguage(fixupLangCode(lang), () => {\r\n    resolve(webL10n);\r\n   });\r\n  });\r\n }\r\n async getLanguage() {\r\n  const l10n = await this._ready;\r\n  return l10n.getLanguage();\r\n }\r\n async getDirection() {\r\n  const l10n = await this._ready;\r\n  return l10n.getDirection();\r\n }\r\n async get(key, args = null, fallback = getL10nFallback(key, args)) {\r\n  const l10n = await this._ready;\r\n  return l10n.get(key, args, fallback);\r\n }\r\n async translate(element) {\r\n  const l10n = await this._ready;\r\n  return l10n.translate(element);\r\n }\r\n}\r\nexport {\r\n GenericL10n\r\n};\r\n","/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\n'use strict';\r\ndocument.webL10n = function (window, document, undefined) {\r\n var gL10nData = {};\r\n var gTextData = '';\r\n var gTextProp = 'textContent';\r\n var gLanguage = '';\r\n var gMacros = {};\r\n var gReadyState = 'loading';\r\n var gAsyncResourceLoading = true;\r\n function getL10nResourceLinks() {\r\n  return document.querySelectorAll('link[type=\"application/l10n\"]');\r\n }\r\n function getL10nDictionary() {\r\n  var script = document.querySelector('script[type=\"application/l10n\"]');\r\n  return script ? JSON.parse(script.innerHTML) : null;\r\n }\r\n function getTranslatableChildren(element) {\r\n  return element ? element.querySelectorAll('*[data-l10n-id]') : [];\r\n }\r\n function getL10nAttributes(element) {\r\n  if (!element)\r\n   return {};\r\n  var l10nId = element.getAttribute('data-l10n-id');\r\n  var l10nArgs = element.getAttribute('data-l10n-args');\r\n  var args = {};\r\n  if (l10nArgs) {\r\n   try {\r\n    args = JSON.parse(l10nArgs);\r\n   } catch (e) {\r\n    console.warn('could not parse arguments for #' + l10nId);\r\n   }\r\n  }\r\n  return {\r\n   id: l10nId,\r\n   args: args\r\n  };\r\n }\r\n function xhrLoadText(url, onSuccess, onFailure) {\r\n  onSuccess = onSuccess || function _onSuccess(data) {\r\n  };\r\n  onFailure = onFailure || function _onFailure() {\r\n  };\r\n  var xhr = new XMLHttpRequest();\r\n  xhr.open('GET', url, gAsyncResourceLoading);\r\n  if (xhr.overrideMimeType) {\r\n   xhr.overrideMimeType('text/plain; charset=utf-8');\r\n  }\r\n  xhr.onreadystatechange = function () {\r\n   if (xhr.readyState == 4) {\r\n    if (xhr.status == 200 || xhr.status === 0) {\r\n     onSuccess(xhr.responseText);\r\n    } else {\r\n     onFailure();\r\n    }\r\n   }\r\n  };\r\n  xhr.onerror = onFailure;\r\n  xhr.ontimeout = onFailure;\r\n  try {\r\n   xhr.send(null);\r\n  } catch (e) {\r\n   onFailure();\r\n  }\r\n }\r\n function parseResource(href, lang, successCallback, failureCallback) {\r\n  var baseURL = href.replace(/[^\\/]*$/, '') || './';\r\n  function evalString(text) {\r\n   if (text.lastIndexOf('\\\\') < 0)\r\n    return text;\r\n   return text.replace(/\\\\\\\\/g, '\\\\').replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r').replace(/\\\\t/g, '\\t').replace(/\\\\b/g, '\\b').replace(/\\\\f/g, '\\f').replace(/\\\\{/g, '{').replace(/\\\\}/g, '}').replace(/\\\\\"/g, '\"').replace(/\\\\'/g, \"'\");\r\n  }\r\n  function parseProperties(text, parsedPropertiesCallback) {\r\n   var dictionary = {};\r\n   var reBlank = /^\\s*|\\s*$/;\r\n   var reComment = /^\\s*#|^\\s*$/;\r\n   var reSection = /^\\s*\\[(.*)\\]\\s*$/;\r\n   var reImport = /^\\s*@import\\s+url\\((.*)\\)\\s*$/i;\r\n   var reSplit = /^([^=\\s]*)\\s*=\\s*(.+)$/;\r\n   function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {\r\n    var entries = rawText.replace(reBlank, '').split(/[\\r\\n]+/);\r\n    var currentLang = '*';\r\n    var genericLang = lang.split('-', 1)[0];\r\n    var skipLang = false;\r\n    var match = '';\r\n    function nextEntry() {\r\n     while (true) {\r\n      if (!entries.length) {\r\n       parsedRawLinesCallback();\r\n       return;\r\n      }\r\n      var line = entries.shift();\r\n      if (reComment.test(line))\r\n       continue;\r\n      if (extendedSyntax) {\r\n       match = reSection.exec(line);\r\n       if (match) {\r\n        currentLang = match[1].toLowerCase();\r\n        skipLang = currentLang !== '*' && currentLang !== lang && currentLang !== genericLang;\r\n        continue;\r\n       } else if (skipLang) {\r\n        continue;\r\n       }\r\n       match = reImport.exec(line);\r\n       if (match) {\r\n        loadImport(baseURL + match[1], nextEntry);\r\n        return;\r\n       }\r\n      }\r\n      var tmp = line.match(reSplit);\r\n      if (tmp && tmp.length == 3) {\r\n       dictionary[tmp[1]] = evalString(tmp[2]);\r\n      }\r\n     }\r\n    }\r\n    nextEntry();\r\n   }\r\n   function loadImport(url, callback) {\r\n    xhrLoadText(url, function (content) {\r\n     parseRawLines(content, false, callback);\r\n    }, function () {\r\n     console.warn(url + ' not found.');\r\n     callback();\r\n    });\r\n   }\r\n   parseRawLines(text, true, function () {\r\n    parsedPropertiesCallback(dictionary);\r\n   });\r\n  }\r\n  xhrLoadText(href, function (response) {\r\n   gTextData += response;\r\n   parseProperties(response, function (data) {\r\n    for (var key in data) {\r\n     var id, prop, index = key.lastIndexOf('.');\r\n     if (index > 0) {\r\n      id = key.substring(0, index);\r\n      prop = key.substring(index + 1);\r\n     } else {\r\n      id = key;\r\n      prop = gTextProp;\r\n     }\r\n     if (!gL10nData[id]) {\r\n      gL10nData[id] = {};\r\n     }\r\n     gL10nData[id][prop] = data[key];\r\n    }\r\n    if (successCallback) {\r\n     successCallback();\r\n    }\r\n   });\r\n  }, failureCallback);\r\n }\r\n function loadLocale(lang, callback) {\r\n  if (lang) {\r\n   lang = lang.toLowerCase();\r\n  }\r\n  callback = callback || function _callback() {\r\n  };\r\n  clear();\r\n  gLanguage = lang;\r\n  var langLinks = getL10nResourceLinks();\r\n  var langCount = langLinks.length;\r\n  if (langCount === 0) {\r\n   var dict = getL10nDictionary();\r\n   if (dict && dict.locales && dict.default_locale) {\r\n    console.log('using the embedded JSON directory, early way out');\r\n    gL10nData = dict.locales[lang];\r\n    if (!gL10nData) {\r\n     var defaultLocale = dict.default_locale.toLowerCase();\r\n     for (var anyCaseLang in dict.locales) {\r\n      anyCaseLang = anyCaseLang.toLowerCase();\r\n      if (anyCaseLang === lang) {\r\n       gL10nData = dict.locales[lang];\r\n       break;\r\n      } else if (anyCaseLang === defaultLocale) {\r\n       gL10nData = dict.locales[defaultLocale];\r\n      }\r\n     }\r\n    }\r\n    callback();\r\n   } else {\r\n    console.log('no resource to load, early way out');\r\n   }\r\n   gReadyState = 'complete';\r\n   return;\r\n  }\r\n  var onResourceLoaded = null;\r\n  var gResourceCount = 0;\r\n  onResourceLoaded = function () {\r\n   gResourceCount++;\r\n   if (gResourceCount >= langCount) {\r\n    callback();\r\n    gReadyState = 'complete';\r\n   }\r\n  };\r\n  function L10nResourceLink(link) {\r\n   var href = link.href;\r\n   this.load = function (lang, callback) {\r\n    parseResource(href, lang, callback, function () {\r\n     console.warn(href + ' not found.');\r\n     console.warn('\"' + lang + '\" resource not found');\r\n     gLanguage = '';\r\n     callback();\r\n    });\r\n   };\r\n  }\r\n  for (var i = 0; i < langCount; i++) {\r\n   var resource = new L10nResourceLink(langLinks[i]);\r\n   resource.load(lang, onResourceLoaded);\r\n  }\r\n }\r\n function clear() {\r\n  gL10nData = {};\r\n  gTextData = '';\r\n  gLanguage = '';\r\n }\r\n function getPluralRules(lang) {\r\n  var locales2rules = {\r\n   'af': 3,\r\n   'ak': 4,\r\n   'am': 4,\r\n   'ar': 1,\r\n   'asa': 3,\r\n   'az': 0,\r\n   'be': 11,\r\n   'bem': 3,\r\n   'bez': 3,\r\n   'bg': 3,\r\n   'bh': 4,\r\n   'bm': 0,\r\n   'bn': 3,\r\n   'bo': 0,\r\n   'br': 20,\r\n   'brx': 3,\r\n   'bs': 11,\r\n   'ca': 3,\r\n   'cgg': 3,\r\n   'chr': 3,\r\n   'cs': 12,\r\n   'cy': 17,\r\n   'da': 3,\r\n   'de': 3,\r\n   'dv': 3,\r\n   'dz': 0,\r\n   'ee': 3,\r\n   'el': 3,\r\n   'en': 3,\r\n   'eo': 3,\r\n   'es': 3,\r\n   'et': 3,\r\n   'eu': 3,\r\n   'fa': 0,\r\n   'ff': 5,\r\n   'fi': 3,\r\n   'fil': 4,\r\n   'fo': 3,\r\n   'fr': 5,\r\n   'fur': 3,\r\n   'fy': 3,\r\n   'ga': 8,\r\n   'gd': 24,\r\n   'gl': 3,\r\n   'gsw': 3,\r\n   'gu': 3,\r\n   'guw': 4,\r\n   'gv': 23,\r\n   'ha': 3,\r\n   'haw': 3,\r\n   'he': 2,\r\n   'hi': 4,\r\n   'hr': 11,\r\n   'hu': 0,\r\n   'id': 0,\r\n   'ig': 0,\r\n   'ii': 0,\r\n   'is': 3,\r\n   'it': 3,\r\n   'iu': 7,\r\n   'ja': 0,\r\n   'jmc': 3,\r\n   'jv': 0,\r\n   'ka': 0,\r\n   'kab': 5,\r\n   'kaj': 3,\r\n   'kcg': 3,\r\n   'kde': 0,\r\n   'kea': 0,\r\n   'kk': 3,\r\n   'kl': 3,\r\n   'km': 0,\r\n   'kn': 0,\r\n   'ko': 0,\r\n   'ksb': 3,\r\n   'ksh': 21,\r\n   'ku': 3,\r\n   'kw': 7,\r\n   'lag': 18,\r\n   'lb': 3,\r\n   'lg': 3,\r\n   'ln': 4,\r\n   'lo': 0,\r\n   'lt': 10,\r\n   'lv': 6,\r\n   'mas': 3,\r\n   'mg': 4,\r\n   'mk': 16,\r\n   'ml': 3,\r\n   'mn': 3,\r\n   'mo': 9,\r\n   'mr': 3,\r\n   'ms': 0,\r\n   'mt': 15,\r\n   'my': 0,\r\n   'nah': 3,\r\n   'naq': 7,\r\n   'nb': 3,\r\n   'nd': 3,\r\n   'ne': 3,\r\n   'nl': 3,\r\n   'nn': 3,\r\n   'no': 3,\r\n   'nr': 3,\r\n   'nso': 4,\r\n   'ny': 3,\r\n   'nyn': 3,\r\n   'om': 3,\r\n   'or': 3,\r\n   'pa': 3,\r\n   'pap': 3,\r\n   'pl': 13,\r\n   'ps': 3,\r\n   'pt': 3,\r\n   'rm': 3,\r\n   'ro': 9,\r\n   'rof': 3,\r\n   'ru': 11,\r\n   'rwk': 3,\r\n   'sah': 0,\r\n   'saq': 3,\r\n   'se': 7,\r\n   'seh': 3,\r\n   'ses': 0,\r\n   'sg': 0,\r\n   'sh': 11,\r\n   'shi': 19,\r\n   'sk': 12,\r\n   'sl': 14,\r\n   'sma': 7,\r\n   'smi': 7,\r\n   'smj': 7,\r\n   'smn': 7,\r\n   'sms': 7,\r\n   'sn': 3,\r\n   'so': 3,\r\n   'sq': 3,\r\n   'sr': 11,\r\n   'ss': 3,\r\n   'ssy': 3,\r\n   'st': 3,\r\n   'sv': 3,\r\n   'sw': 3,\r\n   'syr': 3,\r\n   'ta': 3,\r\n   'te': 3,\r\n   'teo': 3,\r\n   'th': 0,\r\n   'ti': 4,\r\n   'tig': 3,\r\n   'tk': 3,\r\n   'tl': 4,\r\n   'tn': 3,\r\n   'to': 0,\r\n   'tr': 0,\r\n   'ts': 3,\r\n   'tzm': 22,\r\n   'uk': 11,\r\n   'ur': 3,\r\n   've': 3,\r\n   'vi': 0,\r\n   'vun': 3,\r\n   'wa': 4,\r\n   'wae': 3,\r\n   'wo': 0,\r\n   'xh': 3,\r\n   'xog': 3,\r\n   'yo': 0,\r\n   'zh': 0,\r\n   'zu': 3\r\n  };\r\n  function isIn(n, list) {\r\n   return list.indexOf(n) !== -1;\r\n  }\r\n  function isBetween(n, start, end) {\r\n   return start <= n && n <= end;\r\n  }\r\n  var pluralRules = {\r\n   '0': function (n) {\r\n    return 'other';\r\n   },\r\n   '1': function (n) {\r\n    if (isBetween(n % 100, 3, 10))\r\n     return 'few';\r\n    if (n === 0)\r\n     return 'zero';\r\n    if (isBetween(n % 100, 11, 99))\r\n     return 'many';\r\n    if (n == 2)\r\n     return 'two';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '2': function (n) {\r\n    if (n !== 0 && n % 10 === 0)\r\n     return 'many';\r\n    if (n == 2)\r\n     return 'two';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '3': function (n) {\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '4': function (n) {\r\n    if (isBetween(n, 0, 1))\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '5': function (n) {\r\n    if (isBetween(n, 0, 2) && n != 2)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '6': function (n) {\r\n    if (n === 0)\r\n     return 'zero';\r\n    if (n % 10 == 1 && n % 100 != 11)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '7': function (n) {\r\n    if (n == 2)\r\n     return 'two';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '8': function (n) {\r\n    if (isBetween(n, 3, 6))\r\n     return 'few';\r\n    if (isBetween(n, 7, 10))\r\n     return 'many';\r\n    if (n == 2)\r\n     return 'two';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '9': function (n) {\r\n    if (n === 0 || n != 1 && isBetween(n % 100, 1, 19))\r\n     return 'few';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '10': function (n) {\r\n    if (isBetween(n % 10, 2, 9) && !isBetween(n % 100, 11, 19))\r\n     return 'few';\r\n    if (n % 10 == 1 && !isBetween(n % 100, 11, 19))\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '11': function (n) {\r\n    if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14))\r\n     return 'few';\r\n    if (n % 10 === 0 || isBetween(n % 10, 5, 9) || isBetween(n % 100, 11, 14))\r\n     return 'many';\r\n    if (n % 10 == 1 && n % 100 != 11)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '12': function (n) {\r\n    if (isBetween(n, 2, 4))\r\n     return 'few';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '13': function (n) {\r\n    if (isBetween(n % 10, 2, 4) && !isBetween(n % 100, 12, 14))\r\n     return 'few';\r\n    if (n != 1 && isBetween(n % 10, 0, 1) || isBetween(n % 10, 5, 9) || isBetween(n % 100, 12, 14))\r\n     return 'many';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '14': function (n) {\r\n    if (isBetween(n % 100, 3, 4))\r\n     return 'few';\r\n    if (n % 100 == 2)\r\n     return 'two';\r\n    if (n % 100 == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '15': function (n) {\r\n    if (n === 0 || isBetween(n % 100, 2, 10))\r\n     return 'few';\r\n    if (isBetween(n % 100, 11, 19))\r\n     return 'many';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '16': function (n) {\r\n    if (n % 10 == 1 && n != 11)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '17': function (n) {\r\n    if (n == 3)\r\n     return 'few';\r\n    if (n === 0)\r\n     return 'zero';\r\n    if (n == 6)\r\n     return 'many';\r\n    if (n == 2)\r\n     return 'two';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '18': function (n) {\r\n    if (n === 0)\r\n     return 'zero';\r\n    if (isBetween(n, 0, 2) && n !== 0 && n != 2)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '19': function (n) {\r\n    if (isBetween(n, 2, 10))\r\n     return 'few';\r\n    if (isBetween(n, 0, 1))\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '20': function (n) {\r\n    if ((isBetween(n % 10, 3, 4) || n % 10 == 9) && !(isBetween(n % 100, 10, 19) || isBetween(n % 100, 70, 79) || isBetween(n % 100, 90, 99)))\r\n     return 'few';\r\n    if (n % 1000000 === 0 && n !== 0)\r\n     return 'many';\r\n    if (n % 10 == 2 && !isIn(n % 100, [\r\n      12,\r\n      72,\r\n      92\r\n     ]))\r\n     return 'two';\r\n    if (n % 10 == 1 && !isIn(n % 100, [\r\n      11,\r\n      71,\r\n      91\r\n     ]))\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '21': function (n) {\r\n    if (n === 0)\r\n     return 'zero';\r\n    if (n == 1)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '22': function (n) {\r\n    if (isBetween(n, 0, 1) || isBetween(n, 11, 99))\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '23': function (n) {\r\n    if (isBetween(n % 10, 1, 2) || n % 20 === 0)\r\n     return 'one';\r\n    return 'other';\r\n   },\r\n   '24': function (n) {\r\n    if (isBetween(n, 3, 10) || isBetween(n, 13, 19))\r\n     return 'few';\r\n    if (isIn(n, [\r\n      2,\r\n      12\r\n     ]))\r\n     return 'two';\r\n    if (isIn(n, [\r\n      1,\r\n      11\r\n     ]))\r\n     return 'one';\r\n    return 'other';\r\n   }\r\n  };\r\n  var index = locales2rules[lang.replace(/-.*$/, '')];\r\n  if (!(index in pluralRules)) {\r\n   console.warn('plural form unknown for [' + lang + ']');\r\n   return function () {\r\n    return 'other';\r\n   };\r\n  }\r\n  return pluralRules[index];\r\n }\r\n gMacros.plural = function (str, param, key, prop) {\r\n  var n = parseFloat(param);\r\n  if (isNaN(n))\r\n   return str;\r\n  if (prop != gTextProp)\r\n   return str;\r\n  if (!gMacros._pluralRules) {\r\n   gMacros._pluralRules = getPluralRules(gLanguage);\r\n  }\r\n  var index = '[' + gMacros._pluralRules(n) + ']';\r\n  if (n === 0 && key + '[zero]' in gL10nData) {\r\n   str = gL10nData[key + '[zero]'][prop];\r\n  } else if (n == 1 && key + '[one]' in gL10nData) {\r\n   str = gL10nData[key + '[one]'][prop];\r\n  } else if (n == 2 && key + '[two]' in gL10nData) {\r\n   str = gL10nData[key + '[two]'][prop];\r\n  } else if (key + index in gL10nData) {\r\n   str = gL10nData[key + index][prop];\r\n  } else if (key + '[other]' in gL10nData) {\r\n   str = gL10nData[key + '[other]'][prop];\r\n  }\r\n  return str;\r\n };\r\n function getL10nData(key, args, fallback) {\r\n  var data = gL10nData[key];\r\n  if (!data) {\r\n   console.warn('#' + key + ' is undefined.');\r\n   if (!fallback) {\r\n    return null;\r\n   }\r\n   data = fallback;\r\n  }\r\n  var rv = {};\r\n  for (var prop in data) {\r\n   var str = data[prop];\r\n   str = substIndexes(str, args, key, prop);\r\n   str = substArguments(str, args, key);\r\n   rv[prop] = str;\r\n  }\r\n  return rv;\r\n }\r\n function substIndexes(str, args, key, prop) {\r\n  var reIndex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)\\s*\\]\\}/;\r\n  var reMatch = reIndex.exec(str);\r\n  if (!reMatch || !reMatch.length)\r\n   return str;\r\n  var macroName = reMatch[1];\r\n  var paramName = reMatch[2];\r\n  var param;\r\n  if (args && paramName in args) {\r\n   param = args[paramName];\r\n  } else if (paramName in gL10nData) {\r\n   param = gL10nData[paramName];\r\n  }\r\n  if (macroName in gMacros) {\r\n   var macro = gMacros[macroName];\r\n   str = macro(str, param, key, prop);\r\n  }\r\n  return str;\r\n }\r\n function substArguments(str, args, key) {\r\n  var reArgs = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\r\n  return str.replace(reArgs, function (matched_text, arg) {\r\n   if (args && arg in args) {\r\n    return args[arg];\r\n   }\r\n   if (arg in gL10nData) {\r\n    return gL10nData[arg];\r\n   }\r\n   console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');\r\n   return matched_text;\r\n  });\r\n }\r\n function translateElement(element) {\r\n  var l10n = getL10nAttributes(element);\r\n  if (!l10n.id)\r\n   return;\r\n  var data = getL10nData(l10n.id, l10n.args);\r\n  if (!data) {\r\n   console.warn('#' + l10n.id + ' is undefined.');\r\n   return;\r\n  }\r\n  if (data[gTextProp]) {\r\n   if (getChildElementCount(element) === 0) {\r\n    element[gTextProp] = data[gTextProp];\r\n   } else {\r\n    var children = element.childNodes;\r\n    var found = false;\r\n    for (var i = 0, l = children.length; i < l; i++) {\r\n     if (children[i].nodeType === 3 && /\\S/.test(children[i].nodeValue)) {\r\n      if (found) {\r\n       children[i].nodeValue = '';\r\n      } else {\r\n       children[i].nodeValue = data[gTextProp];\r\n       found = true;\r\n      }\r\n     }\r\n    }\r\n    if (!found) {\r\n     var textNode = document.createTextNode(data[gTextProp]);\r\n     element.insertBefore(textNode, element.firstChild);\r\n    }\r\n   }\r\n   delete data[gTextProp];\r\n  }\r\n  for (var k in data) {\r\n   element[k] = data[k];\r\n  }\r\n }\r\n function getChildElementCount(element) {\r\n  if (element.children) {\r\n   return element.children.length;\r\n  }\r\n  if (typeof element.childElementCount !== 'undefined') {\r\n   return element.childElementCount;\r\n  }\r\n  var count = 0;\r\n  for (var i = 0; i < element.childNodes.length; i++) {\r\n   count += element.nodeType === 1 ? 1 : 0;\r\n  }\r\n  return count;\r\n }\r\n function translateFragment(element) {\r\n  element = element || document.documentElement;\r\n  var children = getTranslatableChildren(element);\r\n  var elementCount = children.length;\r\n  for (var i = 0; i < elementCount; i++) {\r\n   translateElement(children[i]);\r\n  }\r\n  translateElement(element);\r\n }\r\n return {\r\n  get: function (key, args, fallbackString) {\r\n   var index = key.lastIndexOf('.');\r\n   var prop = gTextProp;\r\n   if (index > 0) {\r\n    prop = key.substring(index + 1);\r\n    key = key.substring(0, index);\r\n   }\r\n   var fallback;\r\n   if (fallbackString) {\r\n    fallback = {};\r\n    fallback[prop] = fallbackString;\r\n   }\r\n   var data = getL10nData(key, args, fallback);\r\n   if (data && prop in data) {\r\n    return data[prop];\r\n   }\r\n   return '{{' + key + '}}';\r\n  },\r\n  getData: function () {\r\n   return gL10nData;\r\n  },\r\n  getText: function () {\r\n   return gTextData;\r\n  },\r\n  getLanguage: function () {\r\n   return gLanguage;\r\n  },\r\n  setLanguage: function (lang, callback) {\r\n   loadLocale(lang, function () {\r\n    if (callback)\r\n     callback();\r\n   });\r\n  },\r\n  getDirection: function () {\r\n   var rtlList = [\r\n    'ar',\r\n    'he',\r\n    'fa',\r\n    'ps',\r\n    'ur'\r\n   ];\r\n   var shortCode = gLanguage.split('-', 1)[0];\r\n   return rtlList.indexOf(shortCode) >= 0 ? 'rtl' : 'ltr';\r\n  },\r\n  translate: translateFragment,\r\n  getReadyState: function () {\r\n   return gReadyState;\r\n  },\r\n  ready: function (callback) {\r\n   if (!callback) {\r\n    return;\r\n   } else if (gReadyState == 'complete' || gReadyState == 'interactive') {\r\n    window.setTimeout(function () {\r\n     callback();\r\n    });\r\n   } else if (document.addEventListener) {\r\n    document.addEventListener('localized', function once() {\r\n     document.removeEventListener('localized', once);\r\n     callback();\r\n    });\r\n   }\r\n  }\r\n };\r\n}(window, document);\r\n","/* Copyright 2022 Mozilla Foundation\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Edited 2022 SaltDog Project\r\n */\r\n/* eslint-disable */\r\n\r\n//\r\n// THIS FILE IS GENERATED AUTOMATICALLY, DO NOT EDIT MANUALLY!\r\n//\r\n\r\nconst {AppOptions, OptionKind} = require(\"./app_options.js\");\r\nclass BasePreferences {\r\n constructor() {\r\n  if (this.constructor === BasePreferences) {\r\n   throw new Error(\"Cannot initialize BasePreferences.\");\r\n  }\r\n  Object.defineProperty(this, \"defaults\", {\r\n   value: Object.freeze(AppOptions.getAll(OptionKind.PREFERENCE)),\r\n   writable: false,\r\n   enumerable: true,\r\n   configurable: false\r\n  });\r\n  this.prefs = Object.create(null);\r\n  this._initializedPromise = this._readFromStorage(this.defaults).then(prefs => {\r\n   for (const name in this.defaults) {\r\n    const prefValue = prefs?.[name];\r\n    if (typeof prefValue === typeof this.defaults[name]) {\r\n     this.prefs[name] = prefValue;\r\n    }\r\n   }\r\n  });\r\n }\r\n async _writeToStorage(prefObj) {\r\n  throw new Error(\"Not implemented: _writeToStorage\");\r\n }\r\n async _readFromStorage(prefObj) {\r\n  throw new Error(\"Not implemented: _readFromStorage\");\r\n }\r\n async reset() {\r\n  await this._initializedPromise;\r\n  this.prefs = Object.create(null);\r\n  return this._writeToStorage(this.defaults);\r\n }\r\n async set(name, value) {\r\n  await this._initializedPromise;\r\n  const defaultValue = this.defaults[name];\r\n  if (defaultValue === undefined) {\r\n   throw new Error(`Set preference: \"${ name }\" is undefined.`);\r\n  } else if (value === undefined) {\r\n   throw new Error(\"Set preference: no value is specified.\");\r\n  }\r\n  const valueType = typeof value;\r\n  const defaultType = typeof defaultValue;\r\n  if (valueType !== defaultType) {\r\n   if (valueType === \"number\" && defaultType === \"string\") {\r\n    value = value.toString();\r\n   } else {\r\n    throw new Error(`Set preference: \"${ value }\" is a ${ valueType }, expected a ${ defaultType }.`);\r\n   }\r\n  } else {\r\n   if (valueType === \"number\" && !Number.isInteger(value)) {\r\n    throw new Error(`Set preference: \"${ value }\" must be an integer.`);\r\n   }\r\n  }\r\n  this.prefs[name] = value;\r\n  return this._writeToStorage(this.prefs);\r\n }\r\n async get(name) {\r\n  await this._initializedPromise;\r\n  const defaultValue = this.defaults[name], prefValue = this.prefs[name];\r\n  if (defaultValue === undefined) {\r\n   throw new Error(`Get preference: \"${ name }\" is undefined.`);\r\n  }\r\n  return prefValue !== undefined ? prefValue : defaultValue;\r\n }\r\n async getAll() {\r\n  await this._initializedPromise;\r\n  const obj = Object.create(null);\r\n  for (const name in this.defaults) {\r\n   const prefValue = this.prefs[name];\r\n   obj[name] = prefValue !== undefined ? prefValue : this.defaults[name];\r\n  }\r\n  return obj;\r\n }\r\n}\r\nexport {\r\n BasePreferences\r\n};\r\n"],"names":[],"sourceRoot":""}